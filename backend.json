{"openapi":"3.0.0","paths":{"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"example":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIzNjNjNGMwYy1jOGI4LTQ4NmItOWM4Mi05NThhNDY4ODZlMjIiLCJlbWFpbCI6ImRvY3RvckBtZWRpYm9vay5jb20iLCJyb2xlIjoiRE9DVE9SIiwiZG9jdG9ySWQiOiI0MGQ0MDAxNy02MGM2LTQ5YjYtYWYwZS1kZDJkZDBiYTZkMmYiLCJpYXQiOjE3NTcyOTU5ODgsImV4cCI6MTc1NzI5Nzc4OH0.ilIng3EXiQzTXj0U3mAGbe375sQWvM8ypfQiR181I8Y","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","email":"doctor@medibook.com","firstName":"John","lastName":"Smith","role":"DOCTOR","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialties":[{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"}]}}}}},"401":{"description":"Unauthorized"}},"summary":"User login","tags":["Auth"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refresh","parameters":[],"responses":{"200":{"description":"Token refreshed successfully"},"401":{"description":"Invalid refresh token"}},"security":[{"refreshToken":[]}],"summary":"Refresh access token","tags":["Auth"]}},"/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"Logout successful"}},"security":[{"refreshToken":[]}],"summary":"User logout","tags":["Auth"]}},"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"Patient registered successfully. Verification email sent.","content":{"application/json":{"example":{"id":"cc5c5f1f-6734-460b-9456-485b94d28b3a","email":"johndoe@email.com","firstName":"John","lastName":"Doe"}}}},"409":{"description":"Email already exists"}},"summary":"Register a new patient","tags":["Auth"]}},"/auth/verify-email":{"get":{"operationId":"AuthController_verifyEmail","parameters":[{"name":"token","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Email verified successfully","content":{"application/json":{"example":{"message":"User verified"}}}},"400":{"description":"Invalid or expired token"}},"summary":"Verify user email","tags":["Auth"]}},"/users":{"post":{"operationId":"UsersController_createUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"400":{"description":"Bad request"},"409":{"description":"User already exists"}},"security":[{"bearer":[]}],"summary":"Create a new user","tags":["Users"]}},"/users/doctors":{"get":{"operationId":"UsersController_getDoctors","parameters":[],"responses":{"200":{"description":"Doctors retrieved successfully","content":{"application/json":{"example":[{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","email":"doctor@medibook.com","firstName":"John","lastName":"Smith","doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","licenseNumber":"MD123456","title":"Dr.","specialties":[{"specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology"}}]}}]}}}},"security":[{"bearer":[]}],"summary":"Get all doctors","tags":["Users"]}},"/doctors":{"get":{"operationId":"DoctorsController_findAll","parameters":[{"name":"specialtyId","required":false,"in":"query","description":"Filter by specialty ID","schema":{"example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf","type":"string"}},{"name":"name","required":false,"in":"query","description":"Search by doctor name (firstName or lastName)","schema":{"example":"John","type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"default":20,"example":20,"type":"number"}}],"responses":{"200":{"description":"Doctors retrieved successfully","content":{"application/json":{"example":{"data":[{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","email":"doctor@medibook.com","firstName":"John","lastName":"Smith","isActive":true},"specialties":[{"id":"ds-uuid","specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology"}}]}],"pagination":{"page":1,"limit":20,"total":15,"totalPages":1,"hasNext":false,"hasPrev":false}}}}}},"summary":"Get all doctors with optional filters","tags":["Doctors"]}},"/doctors/{id}":{"get":{"operationId":"DoctorsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Doctor retrieved successfully","content":{"application/json":{"example":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","email":"doctor@medibook.com","firstName":"John","lastName":"Smith","isActive":true},"specialties":[{"id":"ds-uuid","specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology"}}]}}}},"404":{"description":"Doctor not found"}},"summary":"Get a doctor by ID","tags":["Doctors"]},"patch":{"operationId":"DoctorsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDoctorDto"}}}},"responses":{"200":{"description":"Doctor updated successfully","content":{"application/json":{"example":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD789012","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","email":"doctor@medibook.com","firstName":"John","lastName":"Smith","isActive":true},"specialties":[{"id":"ds-uuid","specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology"}}]}}}},"404":{"description":"Doctor not found"},"409":{"description":"License number already exists"}},"security":[{"bearer":[]}],"summary":"Update a doctor (Admin or own profile)","tags":["Doctors"]},"delete":{"operationId":"DoctorsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Doctor deleted successfully","content":{"application/json":{"example":{"message":"Doctor deleted successfully"}}}},"404":{"description":"Doctor not found"}},"security":[{"bearer":[]}],"summary":"Delete a doctor (Admin only)","tags":["Doctors"]}},"/doctors/{id}/specialties":{"get":{"operationId":"DoctorsController_getSpecialties","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Specialties retrieved successfully","content":{"application/json":{"example":[{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"}]}}},"404":{"description":"Doctor not found"}},"summary":"Get all specialties of a doctor","tags":["Doctors"]},"post":{"operationId":"DoctorsController_assignSpecialty","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignSpecialtyDto"}}}},"responses":{"201":{"description":"Specialty assigned successfully","content":{"application/json":{"example":{"message":"Specialty assigned successfully"}}}},"404":{"description":"Doctor or specialty not found"},"409":{"description":"Specialty already assigned"}},"security":[{"bearer":[]}],"summary":"Assign a specialty to a doctor (Admin only)","tags":["Doctors"]}},"/doctors/{id}/specialties/{specialtyId}":{"delete":{"operationId":"DoctorsController_removeSpecialty","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"specialtyId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Specialty removed successfully","content":{"application/json":{"example":{"message":"Specialty removed successfully"}}}},"404":{"description":"Doctor or specialty assignment not found"}},"security":[{"bearer":[]}],"summary":"Remove a specialty from a doctor (Admin only)","tags":["Doctors"]}},"/specialties":{"get":{"operationId":"SpecialtiesController_getSpecialties","parameters":[],"responses":{"200":{"description":"Specialties retrieved successfully","content":{"application/json":{"example":[{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology"}]}}}},"security":[{"bearer":[]}],"summary":"Get all specialties","tags":["Specialties"]},"post":{"operationId":"SpecialtiesController_createSpecialty","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSpecialtyDto"}}}},"responses":{"201":{"description":"Specialty created successfully","content":{"application/json":{"example":{"id":"256a3c87-b05e-4af3-ba53-6804da940973","name":"General Medicine","createdAt":"2025-09-02T01:49:54.579Z","updatedAt":"2025-09-02T01:49:54.579Z"}}}},"409":{"description":"Specialty already exists"}},"security":[{"bearer":[]}],"summary":"Create a new specialty","tags":["Specialties"]}},"/specialties/{id}/doctors":{"get":{"operationId":"SpecialtiesController_getDoctorsBySpecialty","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Doctors retrieved successfully","content":{"application/json":{"example":[{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","licenseNumber":"MD123456","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","firstName":"John","lastName":"Smith","email":"doctor@medibook.com"}}]}}},"404":{"description":"Specialty not found"}},"security":[{"bearer":[]}],"summary":"Get doctors by specialty","tags":["Specialties"]}},"/availabilities":{"post":{"operationId":"AvailabilitiesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAvailabilityDto"}}}},"responses":{"201":{"description":"Availability created successfully","content":{"application/json":{"example":[{"id":"4282f101-b2a6-489a-aee0-b9912a7571bf","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":null,"mode":"IN_PERSON","startTime":"2026-01-09T13:00:00.000Z","endTime":"2026-01-09T13:30:00.000Z","durationMinutes":30,"status":"AVAILABLE","createdAt":"2026-01-07T11:08:09.591Z","updatedAt":"2026-01-07T11:08:09.591Z","doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"firstName":"John","lastName":"Smith"}},"specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"}}]}}},"409":{"description":"Availability overlap detected"}},"security":[{"bearer":[]}],"summary":"Create availability","tags":["Availabilities"]}},"/availabilities/search":{"get":{"operationId":"AvailabilitiesController_search","parameters":[{"name":"doctorId","required":false,"in":"query","schema":{"example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf","type":"string"}},{"name":"specialtyId","required":false,"in":"query","schema":{"example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf","type":"string"}},{"name":"mode","required":false,"in":"query","schema":{"type":"string","enum":["IN_PERSON","VIRTUAL"]}},{"name":"status","required":false,"in":"query","schema":{"type":"string","enum":["AVAILABLE","BOOKED","CANCELLED"]}},{"name":"startDate","required":false,"in":"query","schema":{"example":"2024-03-15","type":"string"}},{"name":"endDate","required":false,"in":"query","schema":{"example":"2024-03-15","type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"all","required":false,"in":"query","description":"If true, returns all results without pagination","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"description":"Availabilities found","content":{"application/json":{"example":{"data":[{"id":"4282f101-b2a6-489a-aee0-b9912a7571bf","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":null,"mode":"IN_PERSON","startTime":"2026-01-09T13:00:00.000Z","endTime":"2026-01-09T13:30:00.000Z","durationMinutes":30,"status":"AVAILABLE","createdAt":"2026-01-07T11:08:09.591Z","updatedAt":"2026-01-07T11:08:09.591Z","doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"firstName":"John","lastName":"Smith"}},"specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"},"appointment":null}]}}}}},"security":[{"bearer":[]}],"summary":"Search availabilities","tags":["Availabilities"]}},"/availabilities/{id}":{"get":{"operationId":"AvailabilitiesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Availability found","content":{"application/json":{"example":{"id":"14c127ea-373d-41a9-a9f6-c04c9bd9a900","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":null,"mode":"IN_PERSON","startTime":"2026-01-09T13:30:00.000Z","endTime":"2026-01-09T14:00:00.000Z","durationMinutes":30,"status":"AVAILABLE","createdAt":"2026-01-07T11:08:09.591Z","updatedAt":"2026-01-07T11:08:09.591Z","doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"firstName":"John","lastName":"Smith"}},"specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"},"appointment":null}}}},"404":{"description":"Availability not found"}},"security":[{"bearer":[]}],"summary":"Get availability by ID","tags":["Availabilities"]},"patch":{"operationId":"AvailabilitiesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAvailabilityDto"}}}},"responses":{"200":{"description":"Availability updated successfully"},"404":{"description":"Availability not found"},"409":{"description":"Availability already booked or overlap detected"}},"security":[{"bearer":[]}],"summary":"Update availability","tags":["Availabilities"]},"delete":{"operationId":"AvailabilitiesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Availability deleted successfully","content":{"application/json":{"example":{"id":"14c127ea-373d-41a9-a9f6-c04c9bd9a900","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":null,"mode":"IN_PERSON","startTime":"2026-01-09T13:30:00.000Z","endTime":"2026-01-09T14:00:00.000Z","durationMinutes":30,"status":"AVAILABLE","createdAt":"2026-01-07T11:08:09.591Z","updatedAt":"2026-01-07T11:08:09.591Z"}}}},"404":{"description":"Availability not found"},"409":{"description":"Availability already booked"}},"security":[{"bearer":[]}],"summary":"Delete availability","tags":["Availabilities"]}},"/config-availabilities":{"post":{"operationId":"ConfigAvailabilitiesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateConfigAvailabilityDto"}}}},"responses":{"201":{"description":"Config availability created successfully","content":{"application/json":{"example":{"id":"9cd9547c-e3a1-46f8-9800-cc38c178254f","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","mode":"VIRTUAL","startDate":"2026-01-09T00:00:00.000Z","endDate":null,"startHour":"09:00","endHour":"17:00","durationMinutes":30,"daysOfWeek":[4],"createdAt":"2026-01-07T11:40:43.764Z","updatedAt":"2026-01-07T11:40:43.764Z","doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"firstName":"John","lastName":"Smith"}},"specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"}}}}},"409":{"description":"Config availability overlap detected"}},"security":[{"bearer":[]}],"summary":"Create config availability","tags":["Config Availabilities"]},"get":{"operationId":"ConfigAvailabilitiesController_findAll","parameters":[],"responses":{"200":{"description":"Config availabilities retrieved successfully","content":{"application/json":{"example":[{"id":"9cd9547c-e3a1-46f8-9800-cc38c178254f","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","mode":"VIRTUAL","startDate":"2026-01-09T00:00:00.000Z","endDate":null,"startHour":"09:00","endHour":"17:00","durationMinutes":30,"daysOfWeek":[4],"createdAt":"2026-01-07T11:40:43.764Z","updatedAt":"2026-01-07T11:40:43.764Z","doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"firstName":"John","lastName":"Smith"}},"specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"},"availabilities":[{"id":"f0999679-b0c3-4991-ac54-d9eddcf8a126","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":"9cd9547c-e3a1-46f8-9800-cc38c178254f","mode":"VIRTUAL","startTime":"2026-01-08T12:00:00.000Z","endTime":"2026-01-08T12:30:00.000Z","durationMinutes":30,"status":"AVAILABLE","createdAt":"2026-01-07T11:40:43.948Z","updatedAt":"2026-01-07T11:40:43.948Z"}]}]}}}},"security":[{"bearer":[]}],"summary":"Get all config availabilities","tags":["Config Availabilities"]}},"/config-availabilities/{id}/appointments-count":{"get":{"operationId":"ConfigAvailabilitiesController_getAppointmentsCount","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Appointments count retrieved successfully","content":{"application/json":{"example":{"count":0}}}},"404":{"description":"Config availability not found"}},"security":[{"bearer":[]}],"summary":"Get appointments count for a config availability","tags":["Config Availabilities"]}},"/config-availabilities/{id}":{"get":{"operationId":"ConfigAvailabilitiesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Config availability found","content":{"application/json":{"example":{"id":"9cd9547c-e3a1-46f8-9800-cc38c178254f","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","mode":"VIRTUAL","startDate":"2026-01-09T00:00:00.000Z","endDate":null,"startHour":"09:00","endHour":"17:00","durationMinutes":30,"daysOfWeek":[4],"createdAt":"2026-01-07T11:40:43.764Z","updatedAt":"2026-01-07T11:40:43.764Z","doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"firstName":"John","lastName":"Smith"}},"specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"},"availabilities":[{"id":"f0999679-b0c3-4991-ac54-d9eddcf8a126","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":"9cd9547c-e3a1-46f8-9800-cc38c178254f","mode":"VIRTUAL","startTime":"2026-01-08T12:00:00.000Z","endTime":"2026-01-08T12:30:00.000Z","durationMinutes":30,"status":"AVAILABLE","createdAt":"2026-01-07T11:40:43.948Z","updatedAt":"2026-01-07T11:40:43.948Z"}]}}}},"404":{"description":"Config availability not found"}},"security":[{"bearer":[]}],"summary":"Get config availability by ID","tags":["Config Availabilities"]},"patch":{"operationId":"ConfigAvailabilitiesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateConfigAvailabilityDto"}}}},"responses":{"200":{"description":"Config availability updated successfully"},"404":{"description":"Config availability not found"},"409":{"description":"Config availability overlap detected"}},"security":[{"bearer":[]}],"summary":"Update config availability","tags":["Config Availabilities"]},"delete":{"operationId":"ConfigAvailabilitiesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Config availability deleted successfully","content":{"application/json":{"example":{"id":"9cd9547c-e3a1-46f8-9800-cc38c178254f","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","mode":"VIRTUAL","startDate":"2026-01-09T00:00:00.000Z","endDate":null,"startHour":"09:00","endHour":"17:00","durationMinutes":30,"daysOfWeek":[4],"createdAt":"2026-01-07T11:40:43.764Z","updatedAt":"2026-01-07T11:40:43.764Z"}}}},"404":{"description":"Config availability not found"}},"security":[{"bearer":[]}],"summary":"Delete config availability","tags":["Config Availabilities"]}},"/appointments":{"get":{"operationId":"AppointmentsController_find","parameters":[{"name":"doctorId","required":false,"in":"query","description":"Filter by doctor ID","schema":{"example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf","type":"string"}},{"name":"patientId","required":false,"in":"query","description":"Filter by patient ID","schema":{"example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf","type":"string"}},{"name":"mode","required":false,"in":"query","description":"Filter by appointment mode","schema":{"type":"string","enum":["IN_PERSON","VIRTUAL"]}},{"name":"status","required":false,"in":"query","description":"Filter by appointment status","schema":{"type":"string","enum":["BOOKED","CANCELLED","COMPLETED","ONGOING"]}},{"name":"startDate","required":false,"in":"query","description":"Filter appointments from this date","schema":{"example":"2024-03-15","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"Filter appointments until this date","schema":{"example":"2024-03-15","type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}}],"responses":{"200":{"description":"Appointments retrieved successfully","content":{"application/json":{"example":{"data":[{"id":"137d3535-1929-43c2-8825-afc896c89a04","availabilityId":null,"doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","patientId":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","mode":"IN_PERSON","startTime":"2025-09-01T16:30:00.000Z","endTime":"2025-09-01T17:00:00.000Z","status":"CANCELLED","createdAt":"2025-09-02T01:21:06.061Z","updatedAt":"2025-09-02T01:27:28.229Z","patient":{"id":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","firstName":"Jane","lastName":"Doe","email":"patient@medibook.com"},"doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","firstName":"John","lastName":"Smith","email":"doctor@medibook.com"}},"availability":{"specialty":{"name":"Cardiology"}}}],"pagination":{"page":1,"limit":20,"total":5,"totalPages":1,"hasNext":false,"hasPrev":false}}}}}},"security":[{"bearer":[]}],"summary":"Search appointments","tags":["Appointments"]},"post":{"operationId":"AppointmentsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAppointmentDto"}}}},"responses":{"201":{"description":"Appointment created successfully","content":{"application/json":{"example":{"id":"137d3535-1929-43c2-8825-afc896c89a04","availabilityId":"e9724970-f180-4b64-bd46-b796db9a9ff0","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","patientId":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","mode":"IN_PERSON","startTime":"2025-09-01T16:30:00.000Z","endTime":"2025-09-01T17:00:00.000Z","status":"BOOKED","createdAt":"2025-09-02T01:21:06.061Z","updatedAt":"2025-09-02T01:21:06.061Z","patient":{"id":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","firstName":"Jane","lastName":"Doe","email":"patient@medibook.com"},"doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","firstName":"John","lastName":"Smith","email":"doctor@medibook.com"}},"availability":{"id":"e9724970-f180-4b64-bd46-b796db9a9ff0","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":"3ce56273-3bb9-48cb-b8bd-d3353fb019d4","mode":"IN_PERSON","startTime":"2025-09-01T16:30:00.000Z","endTime":"2025-09-01T17:00:00.000Z","durationMinutes":30,"status":"BOOKED","createdAt":"2025-08-30T01:26:26.464Z","updatedAt":"2025-09-02T01:21:06.055Z","specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"}}}}}},"404":{"description":"Availability not found"},"409":{"description":"Availability already booked or appointment conflict"}},"security":[{"bearer":[]}],"summary":"Create appointment","tags":["Appointments"]}},"/appointments/{id}/cancel":{"patch":{"operationId":"AppointmentsController_cancelAppointment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Appointment cancelled successfully","content":{"application/json":{"example":{"id":"137d3535-1929-43c2-8825-afc896c89a04","availabilityId":"e9724970-f180-4b64-bd46-b796db9a9ff0","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","patientId":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","mode":"IN_PERSON","startTime":"2025-09-01T16:30:00.000Z","endTime":"2025-09-01T17:00:00.000Z","status":"BOOKED","createdAt":"2025-09-02T01:21:06.061Z","updatedAt":"2025-09-02T01:21:06.061Z","patient":{"id":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","firstName":"Jane","lastName":"Doe","email":"patient@medibook.com"},"doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","firstName":"John","lastName":"Smith","email":"doctor@medibook.com"}},"availability":{"id":"e9724970-f180-4b64-bd46-b796db9a9ff0","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":"3ce56273-3bb9-48cb-b8bd-d3353fb019d4","mode":"IN_PERSON","startTime":"2025-09-01T16:30:00.000Z","endTime":"2025-09-01T17:00:00.000Z","durationMinutes":30,"status":"BOOKED","createdAt":"2025-08-30T01:26:26.464Z","updatedAt":"2025-09-02T01:21:06.055Z","specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"}}}}}},"404":{"description":"Appointment not found"},"409":{"description":"Cannot cancel appointment"}},"security":[{"bearer":[]}],"summary":"Cancel appointment","tags":["Appointments"]}},"/appointments/{id}/complete":{"patch":{"operationId":"AppointmentsController_completeAppointment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Appointment marked as completed","content":{"application/json":{"example":{"id":"137d3535-1929-43c2-8825-afc896c89a04","availabilityId":"e9724970-f180-4b64-bd46-b796db9a9ff0","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","patientId":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","mode":"IN_PERSON","startTime":"2025-09-01T16:30:00.000Z","endTime":"2025-09-01T17:00:00.000Z","status":"BOOKED","createdAt":"2025-09-02T01:21:06.061Z","updatedAt":"2025-09-02T01:21:06.061Z","patient":{"id":"4b3c3e56-d848-43f1-a6c5-ca393c866b63","firstName":"Jane","lastName":"Doe","email":"patient@medibook.com"},"doctor":{"id":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","userId":"363c4c0c-c8b8-486b-9c82-958a46886e22","licenseNumber":"MD123456","title":"Dr.","user":{"id":"363c4c0c-c8b8-486b-9c82-958a46886e22","firstName":"John","lastName":"Smith","email":"doctor@medibook.com"}},"availability":{"id":"e9724970-f180-4b64-bd46-b796db9a9ff0","doctorId":"40d40017-60c6-49b6-af0e-dd2dd0ba6d2f","specialtyId":"c04c03bd-de93-487e-bdcc-f62b33588e89","configId":"3ce56273-3bb9-48cb-b8bd-d3353fb019d4","mode":"IN_PERSON","startTime":"2025-09-01T16:30:00.000Z","endTime":"2025-09-01T17:00:00.000Z","durationMinutes":30,"status":"BOOKED","createdAt":"2025-08-30T01:26:26.464Z","updatedAt":"2025-09-02T01:21:06.055Z","specialty":{"id":"c04c03bd-de93-487e-bdcc-f62b33588e89","name":"Cardiology","createdAt":"2025-08-30T01:15:09.668Z","updatedAt":"2025-08-30T01:15:09.668Z"}}}}}},"404":{"description":"Appointment not found"},"409":{"description":"Cannot complete appointment"}},"security":[{"bearer":[]}],"summary":"Mark appointment as completed","tags":["Appointments"]}}},"info":{"title":"MediBook API","description":"Medical appointment booking system API","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"},"cookie":{"type":"apiKey","in":"cookie","name":"refreshToken"}},"schemas":{"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"johndoe@email.com"},"password":{"type":"string","example":"password123","minLength":6}},"required":["email","password"]},"RegisterDto":{"type":"object","properties":{"email":{"type":"string","example":"johndoe@email.com"},"password":{"type":"string","example":"password123","minLength":6},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"}},"required":["email","password","firstName","lastName"]},"DoctorDataDto":{"type":"object","properties":{"licenseNumber":{"type":"string","example":"MD123456"},"title":{"type":"string","example":"Dr."},"specialtyIds":{"description":"Array of specialty IDs to assign to the doctor","example":["3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"],"type":"array","items":{"type":"string"}}},"required":["licenseNumber","title"]},"CreateUserDto":{"type":"object","properties":{"email":{"type":"string","example":"johndoe@email.com"},"password":{"type":"string","example":"password123","minLength":6},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"role":{"type":"string","enum":["ADMIN","DOCTOR","PATIENT"],"example":"PATIENT"},"doctorData":{"$ref":"#/components/schemas/DoctorDataDto"}},"required":["email","password","firstName","lastName","role"]},"UpdateDoctorDto":{"type":"object","properties":{"licenseNumber":{"type":"string","description":"License number of the doctor","example":"MD123456"},"title":{"type":"string","description":"Title of the doctor","example":"Dr."}}},"AssignSpecialtyDto":{"type":"object","properties":{"specialtyId":{"type":"string","description":"ID of the specialty to assign","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"}},"required":["specialtyId"]},"CreateSpecialtyDto":{"type":"object","properties":{"name":{"type":"string","example":"Cardiology"}},"required":["name"]},"CreateAvailabilityDto":{"type":"object","properties":{"doctorId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"specialtyId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"mode":{"type":"string","enum":["IN_PERSON","VIRTUAL"]},"startTime":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"endTime":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"durationMinutes":{"type":"integer","minimum":1,"example":30}},"required":["doctorId","specialtyId","mode","startTime","endTime","durationMinutes"]},"UpdateAvailabilityDto":{"type":"object","properties":{"doctorId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"specialtyId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"mode":{"type":"string","enum":["IN_PERSON","VIRTUAL"]},"startTime":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"endTime":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"durationMinutes":{"type":"integer","minimum":1,"example":30},"status":{"type":"string","enum":["AVAILABLE","BOOKED","CANCELLED"]}}},"CreateConfigAvailabilityDto":{"type":"object","properties":{"doctorId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"specialtyId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"mode":{"type":"string","enum":["IN_PERSON","VIRTUAL"]},"startDate":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"endDate":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"startHour":{"type":"string","example":"09:00"},"endHour":{"type":"string","example":"17:00"},"durationMinutes":{"type":"integer","minimum":1,"example":30},"daysOfWeek":{"description":"Days of week (1=Monday, 7=Sunday)","example":[1,2,3,4,5],"type":"array","items":{"type":"number"}}},"required":["doctorId","specialtyId","mode","startDate","startHour","endHour","durationMinutes","daysOfWeek"]},"UpdateConfigAvailabilityDto":{"type":"object","properties":{"doctorId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"specialtyId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf"},"mode":{"type":"string","enum":["IN_PERSON","VIRTUAL"]},"startDate":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"endDate":{"type":"string","example":"2024-03-15T10:30:00.000Z"},"startHour":{"type":"string","example":"09:00"},"endHour":{"type":"string","example":"17:00"},"durationMinutes":{"type":"integer","minimum":1,"example":30},"daysOfWeek":{"description":"Days of week (1=Monday, 7=Sunday)","example":[1,2,3,4,5],"type":"array","items":{"type":"number"}}}},"CreateAppointmentDto":{"type":"object","properties":{"availabilityId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf","description":"ID of the availability slot to book"},"patientId":{"type":"string","example":"3bc62326-f9ec-4a95-9ae1-51f8ba3d03bf","description":"Patient ID (only for ADMIN/DOCTOR roles, PATIENT uses token)"}},"required":["availabilityId"]}}}}